(()=>{var e,t={559:(e,t,r)=>{"use strict";const n=window.wp.blocks;var i=r(181),o=r.n(i);const s=window.wp.i18n,a=window.wp.blockEditor,l=window.wp.components,c=window.wp.element,d=window.wp.apiFetch;var u=r.n(d);const p=window.wp.url,f=window.ReactJSXRuntime,h=JSON.parse('{"UU":"dmg-media/read-more-test"}');(0,n.registerBlockType)(h.UU,{edit:function({attributes:e,setAttributes:t}){const{title:r,description:n,searchInput:i,selectedPosts:d=[]}=e,[h,v]=(0,c.useState)([]),[m,j]=(0,c.useState)(1),[x,g]=(0,c.useState)(!1),[b,w]=(0,c.useState)(null),_=o()((async(e,t)=>{g(!0),w(null);const r=y(e,{per_page:20,page:t,orderby:"date",order:"desc"});try{const e=await u()({path:(0,p.addQueryArgs)("/wp/v2/posts",r)}),t=O(e);v(t),console.log(t)}catch(e){w("Error fetching posts."),console.log("Error Fetching Posts",e)}finally{g(!1)}}),500),y=(e,t)=>e.id?{...t,include:e.id}:e.title?{...t,search:e.title}:t,O=e=>e.map((e=>({id:e.id,title:e.title.rendered,link:e.link})));return(0,c.useEffect)((()=>{if(""===i||i){const e=isNaN(parseInt(i))?{title:i}:{id:parseInt(i)};_(e,m)}}),[i,m]),(0,f.jsxs)("div",{children:[(0,f.jsx)(a.InspectorControls,{children:(0,f.jsxs)(l.PanelBody,{title:(0,s.__)("Content","read-more"),children:[(0,f.jsx)(l.TextControl,{label:(0,s.__)("Title","read-more"),value:r,onChange:e=>t({title:e})}),(0,f.jsx)(l.TextareaControl,{label:(0,s.__)("Description","read-more"),value:n,onChange:e=>t({description:e})}),(0,f.jsx)(l.TextControl,{label:(0,s.__)("Search Input Text","read-more"),value:i,onChange:e=>t({searchInput:e})}),x?(0,f.jsx)("p",{children:(0,s.__)("Loading...","read-more")}):b?(0,f.jsx)("p",{children:b}):h.length>0?(0,f.jsxs)("div",{children:[(0,f.jsx)("ul",{children:h.map((e=>(0,f.jsx)("li",{children:(0,f.jsx)(l.Button,{isLink:!0,onClick:()=>(e=>{d.some((({id:t})=>t===e.id))||t({selectedPosts:[...d,e]})})(e),children:e.title})},e.id)))}),(0,f.jsxs)("div",{className:"pagination-controls",children:[(0,f.jsx)(l.Button,{disabled:1===m,onClick:()=>{m>1&&j(m-1)},children:"Previous"}),(0,f.jsx)(l.Button,{onClick:()=>{j(m+1)},children:"Next"})]})]}):(0,f.jsx)("p",{children:(0,s.__)("No posts found.","read-more")})]})}),(0,f.jsxs)("div",{...(0,a.useBlockProps)({className:"search"}),children:[(0,f.jsx)("h1",{className:"search__title",children:r}),(0,f.jsx)("p",{className:"search__description",children:n}),(0,f.jsxs)("div",{className:"search__posts-wrapper",children:[(0,f.jsx)("h3",{className:"search__posts-title",children:(0,s.__)("Selected Posts:","read-more")}),d.length>0?(0,f.jsx)("ul",{children:d.map((e=>(0,f.jsxs)("li",{children:[(0,f.jsxs)("a",{className:"dmg-read-more",href:e.link,target:"_blank",rel:"noopener noreferrer",children:["Read More: ",e.title]}),(0,f.jsx)(l.Button,{isDestructive:!0,onClick:()=>{return r=e.id,void t({selectedPosts:d.filter((({id:e})=>e!==r))});var r},children:(0,s.__)("Remove","read-more")})]},e.id)))}):(0,f.jsx)("p",{children:(0,s.__)("No posts selected.","read-more")})]})]})]})}})},181:(e,t,r)=>{var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),u=Object.prototype.toString,p=Math.max,f=Math.min,h=function(){return d.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=o.test(e);return r||s.test(e)?a(e.slice(2),r?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,r){var n,i,o,s,a,l,c=0,d=!1,u=!1,j=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var r=n,o=i;return n=i=void 0,c=t,s=e.apply(o,r)}function g(e){var r=e-l;return void 0===l||r>=t||r<0||u&&e-c>=o}function b(){var e=h();if(g(e))return w(e);a=setTimeout(b,function(e){var r=t-(e-l);return u?f(r,o-(e-c)):r}(e))}function w(e){return a=void 0,j&&n?x(e):(n=i=void 0,s)}function _(){var e=h(),r=g(e);if(n=arguments,i=this,l=e,r){if(void 0===a)return function(e){return c=e,a=setTimeout(b,t),d?x(e):s}(l);if(u)return a=setTimeout(b,t),x(l)}return void 0===a&&(a=setTimeout(b,t)),s}return t=m(t)||0,v(r)&&(d=!!r.leading,o=(u="maxWait"in r)?p(m(r.maxWait)||0,t):o,j="trailing"in r?!!r.trailing:j),_.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=i=a=void 0},_.flush=function(){return void 0===a?s:w(h())},_}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,i,o)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,i,o]=e[d],a=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,i,o]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={202:0,526:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,[s,a,l]=r,c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var d=l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},r=globalThis.webpackChunkdmg_media=globalThis.webpackChunkdmg_media||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=n.O(void 0,[526],(()=>n(559)));i=n.O(i)})();